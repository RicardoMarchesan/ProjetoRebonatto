<!DOCTYPE html>
<html>
<title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script languageGet="javascript">
    var xmlhttp;    
    function init() {
       // put more code here in case you are concerned about browsers that do not provide XMLHttpRequest object directly
       xmlhttp = new XMLHttpRequest();  

    }
    function getdetails() {
   
        var id = document.getElementById("id");
        var url = "http://localhost:8080/WebServiceRest/javaws/wsrest/" + id.value;
        xmlhttp.open('GET',url,true);
        xmlhttp.send(null);

        xmlhttp.onreadystatechange = function() {
               var msgGet =  document.getElementById("mensagemGet");
               var tipoGet =  document.getElementById("tipoGet");
          
               alert("status" + xmlhttp.status + "ready" + xmlhttp.readyState);
               if (xmlhttp.readyState === 4){
            		   if(xmlhttp.status === 200) {
                       		var det = eval( "(" +  xmlhttp.responseText + ")");
                                alert("det " + det.age);
                       		if (det.id > 0 ) {
                          	msgGet.value = det.mensagem;
                          	tipoGet.value = det.tipo;
                       		}
                       		else {
                           		msgGet.value = "";
                           		tipoGet.value ="";
                           		alert("Id do Funcioário inválido");
                       		}
                		}
               			else
                       alert("Error ->" + xmlhttp.responseText);
               }
        };
    }
    
    function postdetails() {
    	var idPost = document.getElementById("idPost").value;
    	var mensagemPost = document.getElementById("mensagemPost").value;
    	var tipoPost = document.getElementById("tipoPost").value;
    	var json = '{"id":' + idPost + ', "mensagem":"' + mensagemPost + '","tipo":' + tipoPost + '}';
    	
    	var urlPut = "http://localhost:8080/WebServiceRest/javaws/wsrest/adicionamsg";

        xmlhttp.open('PUT',urlPut,true);
        xmlhttp.setRequestHeader('Content-Type', 'application/json');
        xmlhttp.send(json);
        
   	}
   	
  </script>
  </head>
  <body  onload="init()">
   <h1>Funcionários </h1>
   
    <table>
    
     <tr>
       <td>ID:  </td>
       <td><input type="text" id="idPost" size="10"/>  
   </tr>

   <tr>
       <td>Mensagem:  </td>
       <td><input type="text" id="mensagemPost" size="20"/> </td>
   </tr>

   <tr>
       <td>Tipo: </td>
       <td><input type="text" id="tipoPost" size="10"/> </td>
   	   <td><input type="button" value="Adicionar" onclick="postdetails()" /></td>
   </tr>
 
 
   </table>
   
   <br><br><br><br>
   <table>
   <tr>
       <td> ID:  </td>
       <td><input type="text" id="id" size="10"/>  
       <input type="button" value="Consultar" onclick="getdetails()"/>
   </tr>
   <tr>
       <td>Mensagem:  </td>
       <td><input type="text" readonly id="mensagemGet" size="20"/> </td>
   </tr>

   <tr>
       <td>Tipo: </td>
       <td><input type="text" readonly id="tipoGet" size="10"/> </td>
   </tr>
   	
   </table>

  </body>
</html>