<!DOCTYPE html>
<html>
<title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script languageGet="javascript">
    var xmlhttp;    
    function init() {
       // put more code here in case you are concerned about browsers that do not provide XMLHttpRequest object directly
       xmlhttp = new XMLHttpRequest();  

    }
    function getdetails() {
   
        var id = document.getElementById("id");
        var url = "http://localhost:13589/WebServiceRest/javaws/wsrest/" + id.value;
        xmlhttp.open('GET',url,true);
        xmlhttp.send(null);

        xmlhttp.onreadystatechange = function() {
               var msgGet =  document.getElementById("mensagemGet");
               var tipoGet =  document.getElementById("tipoGet");
          
               alert("status" + xmlhttp.status + "ready" + xmlhttp.readyState);
               if (xmlhttp.readyState === 4){
            		   if(xmlhttp.status === 200) {
                       		var det = eval( "(" +  xmlhttp.responseText + ")");
                                alert("det " + det.age);
                       		if (det.id > 0 ) {
                          	msgGet.value = det.mensagem;
                          	tipoGet.value = det.tipo;
                       		}
                       		else {
                           		msgGet.value = "";
                           		tipoGet.value ="";
                           		alert("Id do Funcioário inválido");
                       		}
                		}
               			else
                       alert("Error ->" + xmlhttp.responseText);
               }
        };
    }
    
    function postdetails() {
    	var idPost = document.getElementById("idPost").value;
    	var mensagemPost = document.getElementById("mensagemPost").value;
    	var tipoPost = document.getElementById("tipoPost").value;
    	var json = '{"id":' + idPost + ', "mensagem":"' + mensagemPost + '","tipo":' + tipoPost + '}';
    	
    	var urlPost = "http://localhost:13589/WebServiceRest/javaws/wsrest/adicionamsg";

        xmlhttp.open('POST',urlPost,true);
        xmlhttp.setRequestHeader('Content-Type', 'application/json');
        xmlhttp.send(json);
        
   	}
    function deletedetails(){
        
        var id = document.getElementById("id");
        var url = "http://localhost:13589/WebServiceRest/javaws/wsrest/" + id.value;
        xmlhttp.open('DELETE',url,true);
        xmlhttp.send(id);
        xmlhttp.onreadystatechange = function() {
             if (xmlhttp.readyState === 4){
                if(xmlhttp.status === 200) {
                    var det = eval( "(" +  xmlhttp.responseText + ")");
                    alert("delete: " + xmlhttp.responseText);
                     if (det.id ) {
                        alert("Deletado com sucesso");
                     }
                     else {
                         id.value = "";
                         alert("Id invalido");
                     }
                }
           }
                     
        }
        
        
    }
    function putdetails(){
       var id = document.getElementById("id");
        var mensagemGet = document.getElementById("mensagem").value;
    	var tipoGet = document.getElementById("tipo").value;
        var json = '{"id":' + id + ', "mensagem":"' + mensagemGet + '","tipo":' + tipoGet + '}';
        var url = "http://localhost:13589/WebServiceRest/javaws/wsrest/" + id.value;
        xmlhttp.open('PUT',url,true);
        xmlhttp.send(json);
        xmlhttp.setRequestHeader('Content-Type', 'application/json');
    }
   	
  </script>
  </head>
  <body  onload="init()">
   <h3>Adiciona Bela Mensagem  </h3>
   
    <table>
    
     <tr>
       <td>ID:  </td>
       <td><input type="text" id="idPost" size="10"/>  
   </tr>

   <tr>
       <td>Mensagem:  </td>
       <td><input type="text" id="mensagemPost" size="20"/> </td>
   </tr>

   <tr>
       <td>Tipo: </td>
       <td>
           <select id="tipoPost">
               <option value = 1> Motivação </option>
               <option value = 2> Felicitações </option>
               <option value = 3> Saudade </option>
               <option value = 4> Superação de Problemas </option>
               <option value = 5> Amor </option>
               <option value = 6> Experiência de Vida </option>
               <option value = 7> Caráter </option>
               <option value = 8> Top </option>
       </select></td>
   	   <td><input type="button" value="Adicionar" onclick="postdetails()" /></td>
   </tr>
   <br>
   </table>
      <br><br>
       <h3>Consulta Bela Mensagem  </h3>

   <table>
   <tr>
       <td> ID:  </td>
       <td><input type="text" id="id" size="10"/>  
       <input type="button" value="Consultar" onclick="getdetails()"/>
       <input type="button" value="Alterar" onclick="putdetails()">
       <input type="button" value="Excluir" onclick="deletedetails()">
   </tr>
   <tr>
       <td>Mensagem:  </td>
       <td><input type="text"  id="mensagemGet" size="20"/> </td>
   </tr>

   <tr>
       <td>Tipo: </td>
       <td><input type="text" readonly id="tipoGet" size="10"/> </td>
   </tr>
   	
   </table>

  
</html>